{
  // ==========================================================================
  // GraphRAG Configuration - HYBRID PIPELINE
  // ==========================================================================
  // Converted from: hybrid_pipeline.toml
  // VSCode: This file has autocomplete! Press Ctrl+Space for suggestions.
  // ==========================================================================

  "$schema": "../schema/graphrag-config.schema.json",
  "mode": {
    "approach": "hybrid"
  },
  "general": {
    "input_document_path": "data/input.txt",
    "output_dir": "./output/hybrid",
    "log_level": "info",
    "max_threads": 4,
    "enable_profiling": true
  },
  "hybrid": {
    "weights": {
      "semantic_weight": 0.6,
      "algorithmic_weight": 0.4,
      "use_dynamic_weighting": true,
      "query_length_threshold": 10,
      "use_confidence_weighting": true,
      "min_confidence_delta": 0.15
    },
    "embeddings": {
      "primary_backend": "huggingface",
      "primary_model": "sentence-transformers/all-MiniLM-L6-v2",
      "primary_dimensions": 384,
      "secondary_backend": "hash",
      "secondary_hash_size": 1024,
      "secondary_use_tfidf": true,
      "fusion_strategy": "weighted",
      "normalize_before_fusion": true
    },
    "entity_extraction": {
      "use_gleaning": true,
      "use_patterns": true,
      "max_gleaning_rounds": 2,
      "llm_model": "llama3.1:8b",
      "llm_temperature": 0.15,
      "llm_max_tokens": 1000,
      "extract_capitalized": true,
      "extract_acronyms": true,
      "min_pattern_confidence": 0.5,
      "entity_fusion_strategy": "union",
      "require_cross_validation": false,
      "cross_validation_boost": 1.2,
      "confidence_threshold": 0.6,
      "min_entity_length": 2,
      "max_entity_length": 80,
      "entity_types": [
        "PERSON",
        "ORGANIZATION",
        "LOCATION",
        "CONCEPT",
        "EVENT",
        "PRODUCT"
      ],
      "use_semantic_merging": true,
      "merge_similarity_threshold": 0.85
    },
    "retrieval": {
      "fusion_strategy": "rrf",
      "top_k": 10,
      "rrf_k": 60,
      "rrf_weights": [
        0.6,
        0.4
      ],
      "semantic_strategy": "vector_similarity",
      "semantic_top_k": 15,
      "use_hnsw_index": true,
      "hnsw_ef_construction": 150,
      "hnsw_m": 16,
      "min_semantic_similarity": 0.55,
      "algorithmic_strategy": "bm25",
      "algorithmic_top_k": 15,
      "bm25_k1": 1.5,
      "bm25_b": 0.75,
      "use_mmr": true,
      "mmr_lambda": 0.7,
      "deduplicate_results": true,
      "dedup_similarity_threshold": 0.9
    },
    "graph": {
      "extract_relationships": true,
      "relationship_confidence_threshold": 0.45,
      "use_semantic_relations": true,
      "semantic_relation_weight": 0.6,
      "use_cooccurrence": true,
      "cooccurrence_window": 50,
      "algorithmic_relation_weight": 0.4,
      "require_cross_validation": false,
      "cross_validation_boost": 1.3,
      "use_pagerank": true,
      "pagerank_damping": 0.85,
      "pagerank_iterations": 50,
      "min_relation_score": 0.35,
      "max_connections_per_node": 20,
      "bidirectional_relations": true
    }
  },
  "text_processing": {
    "enabled": true,
    "chunk_size": 512,
    "chunk_overlap": 100,
    "min_chunk_size": 100,
    "max_chunk_size": 1024,
    "normalize_whitespace": true,
    "remove_artifacts": true,
    "enrichment": {
      "enabled": true,
      "auto_detect_format": true,
      "parser_type": "auto",
      "extract_keywords": true,
      "max_keywords_per_chunk": 5,
      "use_tfidf": true,
      "generate_summaries": true,
      "min_chunk_length_for_summary": 150,
      "max_summary_length": 120,
      "extract_chapter": true,
      "extract_section": true,
      "extract_position": true,
      "calculate_confidence": true
    }
  },
  "ollama": {
    "enabled": true,
    "host": "http://localhost",
    "port": 11434,
    "chat_model": "llama3.1:8b",
    "embedding_model": "nomic-embed-text",
    "timeout_seconds": 45,
    "max_retries": 3,
    "fallback_to_hash": true,
    "generation": {
      "temperature": 0.2,
      "top_p": 0.9,
      "max_tokens": 800,
      "stream": false
    }
  },
  "query_processing": {
    "enabled": true,
    "use_advanced_pipeline": true,
    "use_intent_classification": true,
    "use_concept_extraction": true,
    "confidence_threshold": 0.5,
    "use_query_routing": true,
    "route_threshold": 0.7,
    "route_short_queries_to_algorithmic": true,
    "route_semantic_queries_to_neural": true,
    "route_complex_queries_to_hybrid": true,
    "intent_classification": {
      "entity_patterns": [
        "who is",
        "what is",
        "person",
        "organization"
      ],
      "concept_patterns": [
        "concept",
        "idea",
        "definition",
        "meaning",
        "similar to"
      ],
      "relationship_patterns": [
        "relationship",
        "connection",
        "related to"
      ],
      "search_patterns": [
        "find",
        "search",
        "locate"
      ]
    },
    "prompt_templates": {
      "entity": "Based on the following context (from semantic and keyword analysis), provide information about: {query}\n\nContext:\n{context}\n\nAnswer:",
      "concept": "Based on the following context (from semantic and keyword analysis), explain the concept: {query}\n\nContext:\n{context}\n\nExplanation:",
      "relationship": "Based on the following context (from semantic and keyword analysis), describe the relationships for: {query}\n\nContext:\n{context}\n\nRelationships:"
    }
  },
  "performance": {
    "batch_processing": true,
    "batch_size": 32,
    "worker_threads": 4,
    "memory_limit_mb": 3072,
    "cache_embeddings": true,
    "cache_semantic_embeddings": true,
    "cache_algorithmic_embeddings": false
  },
  "monitoring": {
    "enabled": true,
    "track_entity_consistency": true,
    "track_relationship_accuracy": true,
    "track_fusion_quality": true,
    "log_insights": true,
    "compare_semantic_vs_algorithmic": true,
    "log_approach_agreement": true
  }
}